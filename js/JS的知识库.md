# JSçš„çŸ¥è¯†åº“~

# ç®­å¤´å‡½æ•°æ¯”è‡ªå·±å†™çš„è¦å¿«ï¼Ÿ

ä½ çš„ä¸¤ä¸ª `createCounter` å‡½æ•°åœ¨åŠŸèƒ½ä¸Šæ˜¯ç›¸åŒçš„ï¼Œä½† **ç¬¬ä¸€ä¸ªç‰ˆæœ¬æ¯”ç¬¬äºŒä¸ªç‰ˆæœ¬æ›´å¿«**ï¼Œä¸»è¦åŸå› æ˜¯ï¼š

---

### **1. `ç®­å¤´å‡½æ•°` vs. `ä¼ ç»Ÿæ–¹æ³•å®šä¹‰`**
#### **ç¬¬ä¸€ä¸ªç‰ˆæœ¬ï¼ˆæ›´å¿«çš„ç‰ˆæœ¬ï¼‰**ï¼š
```javascript
return {
    increment: () => ++n,
    decrement: () => --n,
    reset: () => (n = init)
};
```
- ä½¿ç”¨ **ç®­å¤´å‡½æ•°ï¼ˆ`=>`ï¼‰**ï¼ŒJavaScript å¼•æ“å¯ä»¥æ›´å¥½åœ°ä¼˜åŒ–å®ƒä»¬ï¼Œå› ä¸ºå®ƒä»¬ï¼š
  - æ²¡æœ‰è‡ªå·±çš„ `this` ç»‘å®šï¼ˆæ›´å¿«è®¿é—®å¤–å±‚ä½œç”¨åŸŸçš„ `this`ï¼‰ã€‚
  - ä¸ä¼šåœ¨æ¯æ¬¡è°ƒç”¨æ—¶åˆ›å»ºä¸€ä¸ªæ–°çš„ `this` ä¸Šä¸‹æ–‡ï¼ˆæ›´è½»é‡ï¼‰ã€‚

#### **ç¬¬äºŒä¸ªç‰ˆæœ¬ï¼ˆç¨æ…¢çš„ç‰ˆæœ¬ï¼‰**ï¼š
```javascript
return {
    increment() { ... },
    decrement() { ... },
    reset() { ... }
};
```
- ä½¿ç”¨ä¼ ç»Ÿ **æ–¹æ³•ç®€å†™ï¼ˆ`method() { ... }`ï¼‰**ï¼Œè™½ç„¶è¯­æ³•æ›´å¹²å‡€ï¼Œä½†ï¼š
  - æ¯æ¬¡è°ƒç”¨éƒ½ä¼šç»‘å®š `this`ï¼ˆå³ä½¿ä½ åœ¨è¿™é‡Œæ²¡ä½¿ç”¨ `this`ï¼‰ã€‚
  - ç›¸æ¯”ç®­å¤´å‡½æ•°ï¼Œå¼•æ“ä¼˜åŒ–å°‘ä¸€äº›ï¼Œå¯èƒ½ç•¥å¾®é™ä½æ€§èƒ½ã€‚

---

### **2. `++x`ï¼ˆå‰ç¼€ï¼‰ vs. `x++`ï¼ˆåç¼€ï¼‰**
å°½ç®¡åœ¨ JS ä¸­ `++x` å’Œ `x++` çš„æ€§èƒ½å·®è·å¯ä»¥å¿½ç•¥ä¸è®¡ï¼ˆç°ä»£ JS å¼•æ“ä¼šä¼˜åŒ–ï¼‰ï¼Œä½†åœ¨æŸäº›æƒ…å†µä¸‹ï¼š
- **`++n`**ï¼ˆç¬¬ä¸€ä¸ªç‰ˆæœ¬ï¼‰å…ˆé€’å¢å†è¿”å›å€¼ï¼Œæ¯” **`n++`**ï¼ˆç¬¬äºŒä¸ªç‰ˆæœ¬å…ˆè¿”å›å†é€’å¢ï¼‰å°‘äº†ä¸€æ¬¡ä¸´æ—¶å˜é‡åˆ†é…ã€‚
- **`--n`** åŒç†ï¼Œæ¯” `n--` æ›´å¿«ã€‚

ä½†è¿™éƒ¨åˆ†å½±å“å¾ˆå°ï¼Œä¸»è¦æ˜¯ç®­å¤´å‡½æ•°ä¸ä¼ ç»Ÿæ–¹æ³•çš„å·®å¼‚ã€‚

---

### **3. **æ›´ç²¾ç®€çš„ä½œç”¨åŸŸé“¾**
- **ç¬¬ä¸€ä¸ªç‰ˆæœ¬**ä½¿ç”¨äº† **é—­åŒ…å˜é‡ `n`**ï¼Œè®¿é—®é€Ÿåº¦æ¯” **æ–¹æ³•å†…éƒ¨å˜é‡ `start`** æ›´å¿«ï¼š
  - `n` æ˜¯ç›´æ¥è®¿é—®çš„ï¼Œè€Œ `start` å¯èƒ½æ¶‰åŠ `this` æŸ¥æ‰¾ï¼ˆå³ä½¿ä½ æ²¡ç”¨ `this`ï¼ŒJS å¯èƒ½ä»è¦å¤„ç†ï¼‰ã€‚
- **ç®­å¤´å‡½æ•°** ç”±äºæ²¡æœ‰ `this`ï¼Œå¼•æ“å¯ä»¥æ›´é«˜æ•ˆåœ°æŸ¥æ‰¾å˜é‡ã€‚

---

### **å¦‚ä½•éªŒè¯ï¼Ÿ**
#### **Benchmark æµ‹è¯•**
åœ¨ Node.js æˆ–æµè§ˆå™¨æ§åˆ¶å°è¯•è¯•ï¼š
```javascript
const test1 = () => {
    const counter = createCounter(0);
    for (let i = 0; i < 1000000; i++) {
        counter.increment();
    }
};

const test2 = () => {
    const counter = createCounter2(0);
    for (let i = 0; i < 1000000; i++) {
        counter.increment();
    }
};

console.time("Test 1");
test1();
console.timeEnd("Test 1");

console.time("Test 2");
test2();
console.timeEnd("Test 2");
```
ä½ ä¼šå‘ç° **ç¬¬ä¸€ä¸ªç‰ˆæœ¬ï¼ˆç®­å¤´å‡½æ•°ï¼‰å‡ ä¹æ€»æ˜¯æ›´å¿«**ï¼ˆå°¤å…¶åœ¨å¤šæ¬¡è°ƒç”¨æ—¶ï¼‰ã€‚

---

### **ç»“è®º**
| Version        | è¯­è¨€ç‰¹æ€§         | ä¼˜åŒ–ç¨‹åº¦       | æ€§èƒ½       |
| -------------- | ---------------- | -------------- | ---------- |
| **ç¬¬ä¸€ä¸ªç‰ˆæœ¬** | `ç®­å¤´å‡½æ•° + ++x` | âœ… å¼•æ“ä¼˜åŒ–æ›´å¥½ | âš¡ **æ›´å¿«** |
| **ç¬¬äºŒä¸ªç‰ˆæœ¬** | `ä¼ ç»Ÿæ–¹æ³• + x++` | âš  å°‘é‡é¢å¤–å¼€é”€ | ğŸ¢ ç¨æ…¢     |

**å¦‚æœä½ åœ¨ä¹æ€§èƒ½ï¼Œé€‰æ‹©ç¬¬ä¸€ç§å†™æ³•ï¼ˆç®­å¤´å‡½æ•° + å‰ç¼€æ“ä½œï¼‰ã€‚**

å¦‚æœæƒ³ä»£ç æ›´å¯è¯»ï¼Œç¬¬äºŒç§å†™æ³•ä¹Ÿæ²¡é—®é¢˜ï¼ğŸ› 





# `forEach`ã€`for...in` å’Œ `for...of` 

åœ¨ JavaScript ä¸­ï¼Œ`forEach`ã€`for...in` å’Œ `for...of` æ˜¯ä¸‰ç§ä¸åŒçš„å¾ªç¯æ–¹å¼ï¼Œå®ƒä»¬å„è‡ªé€‚ç”¨äºä¸åŒçš„åœºæ™¯ï¼Œå¹¶ä¸”æœ‰æ˜¾è‘—çš„åŒºåˆ«ã€‚ä»¥ä¸‹æ˜¯å®ƒä»¬çš„è¯¦ç»†å¯¹æ¯”ï¼š

---

## **1. `forEach`ï¼ˆæ•°ç»„æ–¹æ³•ï¼‰**
### **ç‰¹ç‚¹**
- **ä¸“ä¸ºæ•°ç»„è®¾è®¡**ï¼Œæ˜¯ `Array.prototype` çš„æ–¹æ³•ã€‚
- **ä¸èƒ½ç”¨äºæ™®é€šå¯¹è±¡**ï¼ˆé™¤éå…ˆè½¬æ¢æˆæ•°ç»„ï¼Œå¦‚ `Object.keys(obj).forEach`ï¼‰ã€‚
- **ä¸èƒ½ä½¿ç”¨ `break` æˆ– `continue`**ï¼Œåªèƒ½é€šè¿‡ `return` è·³è¿‡å½“å‰è¿­ä»£ï¼ˆç±»ä¼¼ `continue`ï¼‰ã€‚
- **æ²¡æœ‰è¿”å›å€¼**ï¼ˆé™¤éæ‰‹åŠ¨æ”¶é›†ç»“æœï¼‰ã€‚

### **è¯­æ³•**
```javascript
array.forEach((item, index, array) => {
  // æ“ä½œ item
});
```

### **ç¤ºä¾‹**
```javascript
const arr = [1, 2, 3];
arr.forEach((num, i) => {
  console.log(num, i); // 1 0, 2 1, 3 2
});
```

### **é€‚ç”¨åœºæ™¯**
- éå†æ•°ç»„å¹¶å¯¹æ¯ä¸ªå…ƒç´ æ‰§è¡Œæ“ä½œã€‚
- ä¸éœ€è¦æå‰ç»ˆæ­¢å¾ªç¯çš„æƒ…å†µã€‚

---

## **2. `for...in`ï¼ˆéå†å¯¹è±¡çš„å¯æšä¸¾å±æ€§ï¼‰**
### **ç‰¹ç‚¹**
- **ç”¨äºéå†å¯¹è±¡çš„é”®ï¼ˆå±æ€§åï¼‰**ï¼ŒåŒ…æ‹¬åŸå‹é“¾ä¸Šçš„å¯æšä¸¾å±æ€§ã€‚
- **ä¸ä¿è¯é¡ºåº**ï¼ˆå°¤å…¶æ˜¯æ•°å­—é”®ï¼Œå¯èƒ½æŒ‰æ’å…¥é¡ºåºæˆ–æ•°å­—å‡åºï¼‰ã€‚
- **ä¸é€‚åˆéå†æ•°ç»„**ï¼ˆä¼šéå†æ‰€æœ‰å¯æšä¸¾å±æ€§ï¼ŒåŒ…æ‹¬éæ•°å­—é”®ï¼‰ã€‚
- **å¯ä»¥é…åˆ `hasOwnProperty` è¿‡æ»¤åŸå‹é“¾å±æ€§**ã€‚

### **è¯­æ³•**
```javascript
for (const key in object) {
  if (object.hasOwnProperty(key)) { // è¿‡æ»¤åŸå‹é“¾å±æ€§
    console.log(key, object[key]);
  }
}
```

### **ç¤ºä¾‹**
```javascript
const obj = { a: 1, b: 2 };
for (const key in obj) {
  console.log(key, obj[key]); // 'a' 1, 'b' 2
}

// æ•°ç»„ï¼ˆä¸æ¨èï¼‰
const arr = [10, 20];
arr.foo = 'bar'; // æ·»åŠ éæ•°å­—å±æ€§
for (const key in arr) {
  console.log(key); // '0', '1', 'foo'ï¼ˆåŒ…æ‹¬éæ•°å­—é”®ï¼‰
}
```

### **é€‚ç”¨åœºæ™¯**
- éå†å¯¹è±¡çš„å±æ€§ï¼ˆéœ€æ³¨æ„åŸå‹é“¾ï¼‰ã€‚
- è°ƒè¯•æ—¶æ£€æŸ¥å¯¹è±¡çš„æ‰€æœ‰å¯æšä¸¾å±æ€§ã€‚

### ä¸ºä»€ä¹ˆèƒ½ç”¨constï¼Ÿ

å› ä¸ºæ¯æ¬¡ç”¨for in / for of ï¼Œéƒ½ä¼šåˆ›å»ºä¸€ä¸ªæ–°çš„ const å¸¸é‡ï¼Œæ¯ä¸€æ¬¡çš„constå¸¸é‡éƒ½æ˜¯ä¸¤ä¸ªä¸åŒçš„variantï¼Œ

æ‹¥æœ‰å„è‡ªæ–°çš„åœ°å€å’Œå€¼ï¼Œç„¶åä¸‹ä¸€æ¬¡å¾ªç¯è¢«é”€æ¯ã€‚

ä¸ºä»€ä¹ˆä¸èƒ½ç”¨æ™®é€šforå¾ªç¯ï¼Ÿå› ä¸ºæ¯ä¸€æ¬¡i++éƒ½æ˜¯åœ¨åŸæ¥åŸºç¡€ä¸Šèµ‹å€¼ï¼Œè¿åäº†constçš„è§„å®šã€‚

---

## **3. `for...of`ï¼ˆéå†å¯è¿­ä»£å¯¹è±¡çš„å€¼ï¼‰**
### **ç‰¹ç‚¹**
- **ç”¨äºéå†å¯è¿­ä»£å¯¹è±¡ï¼ˆå¦‚æ•°ç»„ã€å­—ç¬¦ä¸²ã€Mapã€Set ç­‰ï¼‰çš„å€¼**ã€‚
- **ä¸èƒ½ç›´æ¥éå†æ™®é€šå¯¹è±¡**ï¼ˆé™¤éå®ç° `[Symbol.iterator]` æ–¹æ³•ï¼‰ã€‚
- **æ”¯æŒ `break` å’Œ `continue`**ã€‚
- **æŒ‰é¡ºåºéå†**ï¼ˆä¸ `for...in` ä¸åŒï¼‰ã€‚

### **è¯­æ³•**
```javascript
for (const value of iterable) {
  console.log(value);
}
```

### **ç¤ºä¾‹**
```javascript
// æ•°ç»„
const arr = [1, 2, 3];
for (const num of arr) {
  if (num === 2) break; // æ”¯æŒ break
  console.log(num); // 1
}

// å­—ç¬¦ä¸²
const str = 'hello';
for (const char of str) {
  console.log(char); // 'h', 'e', 'l', 'l', 'o'
}

// Map
const map = new Map([['a', 1], ['b', 2]]);
for (const [key, value] of map) {
  console.log(key, value); // 'a' 1, 'b' 2
}
```

### **é€‚ç”¨åœºæ™¯**
- éå†æ•°ç»„ã€å­—ç¬¦ä¸²ã€Mapã€Set ç­‰å¯è¿­ä»£å¯¹è±¡ã€‚
- éœ€è¦æ”¯æŒ `break` æˆ– `continue` çš„æƒ…å†µã€‚

---

## **å¯¹æ¯”æ€»ç»“**
| ç‰¹æ€§             | `forEach`       | `for...in`       | `for...of`                 |
| ---------------- | --------------- | ---------------- | -------------------------- |
| **é€‚ç”¨å¯¹è±¡**     | æ•°ç»„            | å¯¹è±¡             | å¯è¿­ä»£å¯¹è±¡ï¼ˆæ•°ç»„ã€Map ç­‰ï¼‰ |
| **éå†å†…å®¹**     | å…ƒç´ å€¼          | é”®ï¼ˆå±æ€§åï¼‰     | å€¼                         |
| **æ”¯æŒ `break`** | âŒ               | âœ…                | âœ…                          |
| **é¡ºåºä¿è¯**     | âœ…ï¼ˆæ•°ç»„é¡ºåºï¼‰   | âŒï¼ˆä¸ä¿è¯é¡ºåºï¼‰  | âœ…ï¼ˆæŒ‰è¿­ä»£é¡ºåºï¼‰            |
| **åŸå‹é“¾å±æ€§**   | ä¸æ¶‰åŠ          | ä¼šéå†ï¼ˆéœ€è¿‡æ»¤ï¼‰ | ä¸æ¶‰åŠ                     |
| **æ™®é€šå¯¹è±¡æ”¯æŒ** | âŒï¼ˆéœ€å…ˆè½¬æ•°ç»„ï¼‰ | âœ…                | âŒï¼ˆé™¤éå®ç°è¿­ä»£å™¨ï¼‰        |

---

## **å¦‚ä½•é€‰æ‹©ï¼Ÿ**
1. **éå†æ•°ç»„**ï¼š
   - éœ€è¦ `break`/`continue` â†’ `for...of`ã€‚
   - ç®€å•æ“ä½œ â†’ `forEach`ã€‚
2. **éå†å¯¹è±¡å±æ€§**ï¼š
   - ç”¨ `for...in` + `hasOwnProperty`ã€‚
3. **éå† Map/Set/å­—ç¬¦ä¸²**ï¼š
   - ç”¨ `for...of`ã€‚

---

## **ç»å…¸é¢è¯•é¢˜**
### **é—®é¢˜ï¼šä»¥ä¸‹ä»£ç è¾“å‡ºä»€ä¹ˆï¼Ÿ**
```javascript
const arr = [1, 2, 3];
arr.foo = 'bar';

for (const key in arr) {
  console.log(key);
}
```
**ç­”æ¡ˆ**ï¼š`'0', '1', '2', 'foo'`ï¼ˆ`for...in` ä¼šéå†æ‰€æœ‰å¯æšä¸¾å±æ€§ï¼ŒåŒ…æ‹¬éæ•°å­—é”®ï¼‰ã€‚

### **å¦‚ä½•ä¿®å¤ï¼Ÿ**
```javascript
for (const key in arr) {
  if (arr.hasOwnProperty(key) && !isNaN(parseInt(key, 10))) {
    console.log(key); // '0', '1', '2'
  }
}
```

---

å¸Œæœ›è¿™ä¸ªå¯¹æ¯”èƒ½å¸®åŠ©ä½ æ¸…æ™°åŒºåˆ†è¿™ä¸‰ç§å¾ªç¯æ–¹å¼ï¼ ğŸš€





# Const

åœ¨ JavaScript ä¸­ï¼Œä½¿ç”¨ `const` å£°æ˜å˜é‡å’Œ `Map` æ—¶ï¼Œå®ƒä»¬çš„â€œä¸å¯å˜æ€§â€è¡¨ç°ä¸åŒï¼Œå…·ä½“å–å†³äºæ•°æ®ç±»å‹ï¼ˆåŸºæœ¬ç±»å‹ vs å¼•ç”¨ç±»å‹ï¼‰ã€‚ä»¥ä¸‹æ˜¯è¯¦ç»†è§£é‡Šï¼š

---

## **1. `const` çš„åŸºæœ¬è§„åˆ™**
- **`const` å£°æ˜çš„å˜é‡ä¸èƒ½è¢«é‡æ–°èµ‹å€¼**ï¼ˆå³ä¸èƒ½æŒ‡å‘æ–°çš„å†…å­˜åœ°å€ï¼‰ã€‚
- **ä½†å¯¹äºå¼•ç”¨ç±»å‹ï¼ˆå¦‚å¯¹è±¡ã€æ•°ç»„ã€Mapï¼‰**ï¼Œ`const` ä»…é™åˆ¶å˜é‡åç»‘å®šï¼Œä¸é™åˆ¶å¯¹è±¡å†…éƒ¨çš„å˜åŒ–ã€‚

### **ç¤ºä¾‹å¯¹æ¯”**
| æƒ…å†µ                                      | æ˜¯å¦æŠ¥é”™ | åŸå›                                          |
| ----------------------------------------- | -------- | -------------------------------------------- |
| `const num = 1; num = 2;`                 | âœ… æŠ¥é”™   | åŸºæœ¬ç±»å‹çš„å€¼ä¸å¯å˜ï¼ˆä¸èƒ½é‡æ–°èµ‹å€¼ï¼‰ã€‚         |
| `const arr = []; arr = [1];`              | âœ… æŠ¥é”™   | ä¸èƒ½é‡æ–°èµ‹å€¼ï¼ˆæ”¹å˜å˜é‡æŒ‡å‘çš„å†…å­˜åœ°å€ï¼‰ã€‚     |
| `const arr = []; arr.push(1);`            | âŒ ä¸æŠ¥é”™ | å¯ä»¥ä¿®æ”¹å¼•ç”¨ç±»å‹å†…éƒ¨çš„å†…å®¹ï¼ˆå†…å­˜åœ°å€æœªå˜ï¼‰ã€‚ |
| `const map = new Map(); map.set('a', 1);` | âŒ ä¸æŠ¥é”™ | å¯ä»¥ä¿®æ”¹ `Map` çš„å†…å®¹ï¼ˆå†…å­˜åœ°å€æœªå˜ï¼‰ã€‚      |

---

## **2. ä¸ºä»€ä¹ˆ `const` èƒ½ç”¨äº `Map`ï¼Ÿ**
- `Map` æ˜¯å¼•ç”¨ç±»å‹ï¼Œ`const` ä»…ä¿è¯å˜é‡å `map` å§‹ç»ˆæŒ‡å‘åŒä¸€ä¸ª `Map` å®ä¾‹ã€‚
- **å…è®¸çš„æ“ä½œ**ï¼š
  ```javascript
  const map = new Map();
  map.set('key', 'value'); // âœ… ä¿®æ”¹å†…éƒ¨æ•°æ®
  map.delete('key');       // âœ… åˆ é™¤é”®å€¼å¯¹
  map.clear();             // âœ… æ¸…ç©º Map
  ```
- **ç¦æ­¢çš„æ“ä½œ**ï¼š
  ```javascript
  const map = new Map();
  map = new Map(); // âŒ æŠ¥é”™ï¼ä¸èƒ½é‡æ–°èµ‹å€¼
  ```

---

## **3. ç±»æ¯”å…¶ä»–å¼•ç”¨ç±»å‹**
### **ï¼ˆ1ï¼‰å¯¹è±¡ï¼ˆObjectï¼‰**
```javascript
const obj = { a: 1 };
obj.a = 2;      // âœ… ä¿®æ”¹å±æ€§
obj.b = 3;      // âœ… æ·»åŠ å±æ€§
delete obj.a;   // âœ… åˆ é™¤å±æ€§
obj = {};       // âŒ æŠ¥é”™ï¼ä¸èƒ½é‡æ–°èµ‹å€¼
```

### **ï¼ˆ2ï¼‰æ•°ç»„ï¼ˆArrayï¼‰**
```javascript
const arr = [1];
arr.push(2);    // âœ… ä¿®æ”¹å†…å®¹
arr[0] = 3;     // âœ… ä¿®æ”¹å…ƒç´ 
arr = [4];      // âŒ æŠ¥é”™ï¼ä¸èƒ½é‡æ–°èµ‹å€¼
```

---

## **4. ä¸ºä»€ä¹ˆæ¨èç”¨ `const` å£°æ˜ `Map`ï¼Ÿ**
1. **é¿å…æ„å¤–é‡æ–°èµ‹å€¼**ï¼š
   - é˜²æ­¢å› è¯¯æ“ä½œå¯¼è‡´ `Map` å®ä¾‹è¢«æ›¿æ¢ï¼ˆé€»è¾‘é”™è¯¯ï¼‰ã€‚
   ```javascript
   let map = new Map();
   map = new Map(); // å¯èƒ½æ— æ„ä¸­è¦†ç›–åŸæœ‰æ•°æ®ï¼ˆç”¨ const å¯é¿å…ï¼‰
   ```
2. **ä»£ç æ„å›¾æ›´æ¸…æ™°**ï¼š
   - æ˜ç¡®è¡¨ç¤ºè¯¥å˜é‡æŒ‡å‘çš„ `Map` å®ä¾‹ä¸ä¼šæ”¹å˜ï¼ˆå°½ç®¡å†…å®¹å¯å˜ï¼‰ã€‚
3. **ç¬¦åˆå‡½æ•°å¼ç¼–ç¨‹å®è·µ**ï¼š
   - å°½é‡ä½¿ç”¨ `const` å‡å°‘å¯å˜çŠ¶æ€ï¼Œæå‡ä»£ç å¯ç»´æŠ¤æ€§ã€‚

---

## **5. å¦‚æœéœ€è¦å®Œå…¨ä¸å¯å˜çš„ `Map`**
å¦‚æœå¸Œæœ› `Map` å†…å®¹ä¹Ÿä¸å¯å˜ï¼Œå¯ä»¥ä½¿ç”¨ï¼š
- **å†»ç»“å¯¹è±¡**ï¼ˆæµ…å±‚ä¸å¯å˜ï¼‰ï¼š
  ```javascript
  const map = new Map();
  Object.freeze(map); // ç¦æ­¢æ·»åŠ /åˆ é™¤å±æ€§ï¼ˆä½†ç°æœ‰é”®å€¼ä»å¯ä¿®æ”¹ï¼‰
  ```
- **ç¬¬ä¸‰æ–¹åº“**ï¼ˆå¦‚ Immutable.jsï¼‰ï¼š
  ```javascript
  import { Map } from 'immutable';
  const map = Map({ key: 'value' }); // å®Œå…¨ä¸å¯å˜
  ```

---



### \- const å¸¸é‡

 \- ç®€å•æ•°æ®ç±»å‹  å€¼ä¸å¯ä»¥æ”¹å˜

 \- å¯¹è±¡å‘¢ï¼Ÿ å€¼å¯ä»¥æ”¹å˜ï¼ŒæŒ‡å‘çš„å†…å­˜åœ°å€ä¸èƒ½å‘ç”Ÿæ”¹å˜ã€‚

\- èµ‹å€¼    /  stack.js  /

ç®€å•æ•°æ®ç±»å‹  å€¼ä¼ é€’

å¤æ‚æ•°æ®ç±»å‹  åœ°å€ä¼ é€’ï¼ˆå¼•ç”¨å¼èµ‹å€¼ï¼‰

const ç±»å‹ä¸åŒï¼Œå¤„ç†ä¸åŒ

å†…å­˜æ ˆ è¿ç»­  ç©ºé—´å° å¿«   ä¸€èˆ¬çš„æ•°æ®ç±»å‹å¯ä»¥å­˜åœ¨æ ˆä¸­

å†…å­˜å † ä¸è¿ç»­  ç©ºé—´æ¯”è¾ƒå¤§ æ…¢  å¤æ‚æ•°æ®ç±»å‹å­˜åœ¨å †ä¸­

const å¯¹äºç®€å•æ•°æ®ï¼Œå¤æ‚æ•°æ®ç±»å‹è™½ç„¶è¡¨ç°ä¸ä¸€è‡´ï¼Œä½†å†…å­˜æ ˆä¸­çš„å€¼éƒ½ä¸ä¼šå‘ç”Ÿæ”¹å˜

ç®€å•æ•°æ®ç±»å‹çš„å€¼éƒ½æ˜¯ç›´æ¥å­˜å‚¨åœ¨Stackä¸­ï¼Œå¤æ‚æ•°æ®ç±»å‹åœ¨Stackä¸­å­˜å‚¨çš„æ˜¯åœ°å€ï¼Œåœ°å€æŒ‡å‘å †ä¸­çš„å€¼ã€‚



## **æ€»ç»“**

- `const` é™åˆ¶çš„æ˜¯å˜é‡åç»‘å®šï¼Œè€Œéå¼•ç”¨ç±»å‹çš„å†…å®¹ã€‚
- **`const + Map` è¡¨ç¤º**ï¼š
  - å˜é‡ `map` æ°¸è¿œæŒ‡å‘åŒä¸€ä¸ª `Map` å®ä¾‹ã€‚
  - ä½†å¯ä»¥è‡ªç”±ä¿®æ”¹è¯¥ `Map` çš„é”®å€¼å¯¹ï¼ˆå¢åˆ æ”¹æŸ¥ï¼‰ã€‚
- **æœ€ä½³å®è·µ**ï¼šé»˜è®¤ç”¨ `const`ï¼Œé™¤ééœ€è¦é‡æ–°èµ‹å€¼å†æ”¹ç”¨ `let`ã€‚



# Map

`Map` æ˜¯ JavaScript ä¸­ä¸€ç§éå¸¸å®ç”¨çš„æ•°æ®ç»“æ„ï¼Œå®ƒç±»ä¼¼äºå¯¹è±¡ï¼ˆ`Object`ï¼‰ï¼Œä½†æä¾›äº†æ›´å¼ºå¤§çš„é”®å€¼å¯¹å­˜å‚¨å’Œæ“ä½œèƒ½åŠ›ã€‚`Map` çš„é”®å¯ä»¥æ˜¯ä»»æ„ç±»å‹ï¼ˆåŒ…æ‹¬å¯¹è±¡ã€å‡½æ•°ç­‰ï¼‰ï¼Œè€Œä¸ä»…ä»…æ˜¯å­—ç¬¦ä¸²æˆ– `Symbol`ã€‚ä»¥ä¸‹æ˜¯ `Map` çš„å„ç§ç”¨æ³•è¯¦è§£ï¼š



JSçš„å“ˆå¸Œå®ç°ï¼š

Object

Map

Set

---

## **1. åˆ›å»º Map**
```javascript
// åˆ›å»ºä¸€ä¸ªç©ºçš„ Map
const map = new Map();

// é€šè¿‡äºŒç»´æ•°ç»„åˆå§‹åŒ– Map
const mapWithData = new Map([
  ['key1', 'value1'],
  ['key2', 'value2'],
  [1, 'number key'],
  [{}, 'object key'],
]);
```

---

## **2. åŸºæœ¬æ“ä½œ**
### **ï¼ˆ1ï¼‰æ·»åŠ é”®å€¼å¯¹ `set(key, value)`**
```javascript
const map = new Map();
map.set('name', 'Alice');  // å­—ç¬¦ä¸²é”®
map.set(1, 'One');         // æ•°å­—é”®
map.set({ id: 1 }, 'User'); // å¯¹è±¡é”®
```

### **ï¼ˆ2ï¼‰è·å–å€¼ `get(key)`**
```javascript
console.log(map.get('name')); // 'Alice'
console.log(map.get(1));      // 'One'
console.log(map.get({ id: 1 })); // undefinedï¼ˆå› ä¸ºå¯¹è±¡å¼•ç”¨ä¸åŒï¼‰
```

### **ï¼ˆ3ï¼‰æ£€æŸ¥é”®æ˜¯å¦å­˜åœ¨ `has(key)`**
```javascript
console.log(map.has('name')); // true
console.log(map.has('age'));  // false
```

### **ï¼ˆ4ï¼‰åˆ é™¤é”®å€¼å¯¹ `delete(key)`**
```javascript
map.delete('name'); // åˆ é™¤ 'name' é”®
console.log(map.has('name')); // false
```

### **ï¼ˆ5ï¼‰æ¸…ç©º Map `clear()`**
```javascript
map.clear();
console.log(map.size); // 0
```

### **ï¼ˆ6ï¼‰è·å– Map å¤§å° `size`**
```javascript
console.log(map.size); // è¿”å›é”®å€¼å¯¹çš„æ•°é‡
```

---

## **3. éå† Map**
`Map` æä¾›äº†å¤šç§éå†æ–¹å¼ï¼š

### **ï¼ˆ1ï¼‰`keys()`ï¼šè·å–æ‰€æœ‰é”®**
```javascript
for (const key of map.keys()) {
  console.log(key);
}
```

### **ï¼ˆ2ï¼‰`values()`ï¼šè·å–æ‰€æœ‰å€¼**
```javascript
for (const value of map.values()) {
  console.log(value);
}
```

### **ï¼ˆ3ï¼‰`entries()`ï¼šè·å–æ‰€æœ‰é”®å€¼å¯¹**
```javascript
for (const [key, value] of map.entries()) {
  console.log(key, value);
}
// ç­‰åŒäºï¼š
for (const [key, value] of map) {
  console.log(key, value);
}
```

### **ï¼ˆ4ï¼‰`forEach()` éå†**
```javascript
map.forEach((value, key) => {
  console.log(key, value);
});
```

---

## **4. Map ä¸ Object çš„åŒºåˆ«**
| ç‰¹æ€§         | Map                       | Object                                   |
| ------------ | ------------------------- | ---------------------------------------- |
| **é”®çš„ç±»å‹** | ä»»æ„ç±»å‹ï¼ˆå¯¹è±¡ã€å‡½æ•°ç­‰ï¼‰  | ä»…é™å­—ç¬¦ä¸²æˆ– `Symbol`                    |
| **é¡ºåº**     | æŒ‰æ’å…¥é¡ºåºéå†            | ä¸ä¿è¯é¡ºåºï¼ˆES6 åéƒ¨åˆ†æœ‰åºï¼‰             |
| **å¤§å°**     | é€šè¿‡ `size` è·å–          | æ‰‹åŠ¨è®¡ç®—ï¼ˆå¦‚ `Object.keys(obj).length`ï¼‰ |
| **æ€§èƒ½**     | é¢‘ç¹å¢åˆ æ—¶æ›´å¿«            | é¢‘ç¹å¢åˆ æ—¶è¾ƒæ…¢ï¼ˆéœ€ä¼˜åŒ–ï¼‰                 |
| **é»˜è®¤é”®**   | æ— é»˜è®¤é”®ï¼ˆå¦‚ `toString`ï¼‰ | å¯èƒ½æœ‰åŸå‹é“¾ä¸Šçš„é”®                       |

---

## **5. é«˜çº§ç”¨æ³•**
### **ï¼ˆ1ï¼‰ä½¿ç”¨å¯¹è±¡ä½œä¸ºé”®**
```javascript
const user1 = { id: 1 };
const user2 = { id: 2 };

const userMap = new Map();
userMap.set(user1, 'Alice');
userMap.set(user2, 'Bob');

console.log(userMap.get(user1)); // 'Alice'
```

### **ï¼ˆ2ï¼‰Map è½¬æ¢ä¸ºæ•°ç»„**
```javascript
const map = new Map([
  ['a', 1],
  ['b', 2],
]);

// è½¬æ¢ä¸ºé”®æ•°ç»„
const keys = [...map.keys()]; // ['a', 'b']

// è½¬æ¢ä¸ºå€¼æ•°ç»„
const values = [...map.values()]; // [1, 2]

// è½¬æ¢ä¸ºé”®å€¼å¯¹æ•°ç»„
const entries = [...map.entries()]; // [['a', 1], ['b', 2]]
```

### **ï¼ˆ3ï¼‰æ•°ç»„/å¯¹è±¡è½¬æ¢ä¸º Map**
```javascript
// äºŒç»´æ•°ç»„ â†’ Map
const arr = [['a', 1], ['b', 2]];
const mapFromArr = new Map(arr);

// å¯¹è±¡ â†’ Map
const obj = { a: 1, b: 2 };
const mapFromObj = new Map(Object.entries(obj));
```

### **ï¼ˆ4ï¼‰Map åˆå¹¶**
```javascript
const map1 = new Map([['a', 1]]);
const map2 = new Map([['b', 2]]);

const mergedMap = new Map([...map1, ...map2]);
console.log([...mergedMap]); // [['a', 1], ['b', 2]]
```

---

## **6. å®é™…åº”ç”¨åœºæ™¯**
### **ï¼ˆ1ï¼‰ç¼“å­˜æ•°æ®**
```javascript
const cache = new Map();

function getData(key) {
  if (cache.has(key)) {
    return cache.get(key);
  }
  const data = fetchDataFromServer(key); // å‡è®¾æ˜¯è€—æ—¶æ“ä½œ
  cache.set(key, data);
  return data;
}
```

### **ï¼ˆ2ï¼‰ç»Ÿè®¡è¯é¢‘**
```javascript
function countWords(text) {
  const words = text.split(' ');
  const freqMap = new Map();

  for (const word of words) {
    freqMap.set(word, (freqMap.get(word) || 0) + 1);
  }

  return freqMap;
}
```

### **ï¼ˆ3ï¼‰å®ç° LRU ç¼“å­˜ï¼ˆæœ€è¿‘æœ€å°‘ä½¿ç”¨ï¼‰**
```javascript
class LRUCache {
  constructor(capacity) {
    this.capacity = capacity;
    this.cache = new Map();
  }

  get(key) {
    if (!this.cache.has(key)) return -1;
    const value = this.cache.get(key);
    this.cache.delete(key);
    this.cache.set(key, value); // æ›´æ–°è®¿é—®é¡ºåº
    return value;
  }

  put(key, value) {
    if (this.cache.has(key)) {
      this.cache.delete(key);
    } else if (this.cache.size >= this.capacity) {
      // åˆ é™¤æœ€ä¹…æœªä½¿ç”¨çš„é”®
      const oldestKey = this.cache.keys().next().value;
      this.cache.delete(oldestKey);
    }
    this.cache.set(key, value);
  }
}
```

---

## **7. æ€»ç»“**
- **`Map` é€‚ç”¨äºéœ€è¦é”®å€¼å¯¹å­˜å‚¨ä¸”é”®ç±»å‹å¤šæ ·çš„åœºæ™¯**ã€‚
- **æ¯” `Object` æ›´çµæ´»**ï¼Œæ”¯æŒä»»æ„é”®ç±»å‹ã€ä¿æŒæ’å…¥é¡ºåºã€æä¾›ä¾¿æ·çš„éå†æ–¹æ³•ã€‚
- **å¸¸ç”¨æ–¹æ³•**ï¼š`set()`ã€`get()`ã€`has()`ã€`delete()`ã€`clear()`ã€`size`ã€‚
- **éå†æ–¹å¼**ï¼š`keys()`ã€`values()`ã€`entries()`ã€`forEach()`ã€‚
- **é€‚ç”¨åœºæ™¯**ï¼šç¼“å­˜ã€è¯é¢‘ç»Ÿè®¡ã€LRU ç¼“å­˜ç­‰ã€‚

å¸Œæœ›è¿™ä»½æŒ‡å—èƒ½å¸®åŠ©ä½ å…¨é¢æŒæ¡ `Map` çš„ç”¨æ³•ï¼ ğŸš€



çœ‹èµ·æ¥ä½ æƒ³äº†è§£çš„æ˜¯ `NaN`ï¼ˆNot a Numberï¼‰ï¼Œè€Œä¸æ˜¯ "Nancy"ï¼ˆè¿™æ˜¯ä¸€ä¸ªè‹±æ–‡åå­—ï¼‰ã€‚  

# **å…³äº `NaN`ï¼ˆNot a Numberï¼‰**  
`NaN` æ˜¯ JavaScript ä¸­çš„ä¸€ä¸ªç‰¹æ®Šå€¼ï¼Œè¡¨ç¤º **"ä¸æ˜¯ä¸€ä¸ªæœ‰æ•ˆçš„æ•°å­—"**ã€‚å®ƒé€šå¸¸å‡ºç°åœ¨æ•°å­¦è¿ç®—å¤±è´¥æˆ–ç»“æœæ— æ³•è¡¨ç¤ºä¸ºæœ‰æ•ˆæ•°å­—çš„æƒ…å†µä¸‹ã€‚  

#### **å…³é”®ç‰¹æ€§ï¼š**
1. **`NaN` çš„ç±»å‹æ˜¯ `number`**  
   ```js
   console.log(typeof NaN); // "number"
   ```
   è™½ç„¶å®ƒè¡¨ç¤º "ä¸æ˜¯ä¸€ä¸ªæ•°å­—"ï¼Œä½†å®ƒåœ¨ JavaScript ä¸­è¢«å½’ç±»ä¸º `number` ç±»å‹ã€‚

2. **`NaN` ä¸ç­‰äºä»»ä½•å€¼ï¼ŒåŒ…æ‹¬å®ƒè‡ªå·±**  
   ```js
   console.log(NaN === NaN); // false
   console.log(NaN == NaN);  // false
   ```
   è¿™æ˜¯ JavaScript ä¸­å”¯ä¸€ä¸€ä¸ª **ä¸ç­‰äºè‡ªèº«** çš„å€¼ã€‚

3. **å¦‚ä½•æ£€æµ‹ `NaN`ï¼Ÿ**  
   ç”±äº `NaN` ä¸ç­‰äºè‡ªèº«ï¼Œä¸èƒ½ç›´æ¥ç”¨ `===` åˆ¤æ–­ï¼Œè€Œæ˜¯è¦ç”¨ï¼š
   ```js
   console.log(isNaN(NaN));      // true
   console.log(Number.isNaN(NaN)); // true
   ```
   - `isNaN()`ï¼šä¼šå…ˆå°è¯•æŠŠå€¼è½¬æ¢æˆæ•°å­—ï¼Œå†åˆ¤æ–­æ˜¯å¦æ˜¯ `NaN`ï¼ˆå¯èƒ½è¯¯åˆ¤å­—ç¬¦ä¸²ç­‰ï¼‰ã€‚
   - `Number.isNaN()`ï¼šä¸¥æ ¼æ£€æŸ¥ï¼Œåªæœ‰ `NaN` æ‰è¿”å› `true`ï¼ˆæ¨èä½¿ç”¨ï¼‰ã€‚

4. **`NaN` çš„äº§ç”Ÿåœºæ™¯**  
   - æ•°å­¦è¿ç®—å¤±è´¥ï¼š
     ```js
     console.log(0 / 0);        // NaN
     console.log(Math.sqrt(-1)); // NaN
     ```
   - å­—ç¬¦ä¸²è§£æå¤±è´¥ï¼š
     ```js
     console.log(parseInt("abc")); // NaN
     ```
   - ä¸ `NaN` è¿›è¡Œè¿ç®—ï¼š
     ```js
     console.log(NaN + 5); // NaN
     ```

---

### **ä½ çš„ä»£ç ç¤ºä¾‹åˆ†æ**
```js
function add(a, b) {
    if (typeof a !== 'number' || typeof b !== 'number') {
        throw new TypeError('å‚æ•°ç±»å‹é”™è¯¯');
    }
    return a + b;
}

console.log(add(NaN, 2)); // è¾“å‡º: NaN
```
- `NaN` æ˜¯ `number` ç±»å‹ï¼Œæ‰€ä»¥ä¸ä¼šè§¦å‘ `TypeError`ã€‚  
- ä½† `NaN + 2` ä»ç„¶æ˜¯ `NaN`ï¼Œå› ä¸º `NaN` ä¼šæ±¡æŸ“æ‰€æœ‰æ•°å­¦è¿ç®—ã€‚

#### **å¦‚ä½•ä¿®å¤ï¼Ÿ**
å¦‚æœä½ æƒ³åœ¨å‚æ•°æ˜¯ `NaN` æ—¶ä¹ŸæŠ›å‡ºé”™è¯¯ï¼Œå¯ä»¥å¢åŠ æ£€æŸ¥ï¼š
```js
function add(a, b) {
    if (typeof a !== 'number' || typeof b !== 'number' || isNaN(a) || isNaN(b)) {
        throw new TypeError('å‚æ•°å¿…é¡»æ˜¯æœ‰æ•ˆçš„æ•°å­—');
    }
    return a + b;
}

console.log(add(NaN, 2)); // æŠ›å‡ºé”™è¯¯: "å‚æ•°å¿…é¡»æ˜¯æœ‰æ•ˆçš„æ•°å­—"
```

---

### **æ€»ç»“**
- `NaN` è¡¨ç¤ºæ— æ•ˆçš„æ•°å­—ï¼Œä½†ç±»å‹æ˜¯ `number`ã€‚  
- ç”¨ `Number.isNaN()` æ£€æµ‹ `NaN` æœ€å¯é ã€‚  
- åœ¨ä¸¥æ ¼çš„æ•°å€¼è®¡ç®—ä¸­ï¼Œåº”è¯¥é¢å¤–æ£€æŸ¥ `NaN`ï¼Œé¿å…æ„å¤–è¡Œä¸ºã€‚  

å¸Œæœ›è¿™èƒ½å¸®ä½ ç†æ¸… `NaN` çš„æ¦‚å¿µï¼å¦‚æœæœ‰å…¶ä»–é—®é¢˜ï¼Œæ¬¢è¿ç»§ç»­æé—®ã€‚ ğŸ˜Š





# IEEE 754 åŒç²¾åº¦æµ®ç‚¹æ•°ä¸å®‰å…¨æ•´æ•°èŒƒå›´ `Number.MAX_SAFE_INTEGER = 2^53 - 1 = 9007199254740991` çš„è§£é‡Š

#### 1. **IEEE 754 åŒç²¾åº¦æµ®ç‚¹æ•°æ ¼å¼**
IEEE 754 åŒç²¾åº¦æµ®ç‚¹æ•°ï¼ˆ64ä½ï¼‰ç”±ä¸‰éƒ¨åˆ†ç»„æˆï¼š
- **ç¬¦å·ä½ï¼ˆ1ä½ï¼‰**ï¼šè¡¨ç¤ºæ­£è´Ÿ
- **æŒ‡æ•°éƒ¨åˆ†ï¼ˆ11ä½ï¼‰**ï¼šè¡¨ç¤º 2 çš„å¹‚æ¬¡ï¼ˆé‡‡ç”¨åç§»ç è¡¨ç¤ºï¼Œåç§»é‡ 1023ï¼‰
- **å°¾æ•°éƒ¨åˆ†ï¼ˆ52ä½ï¼‰**ï¼šè¡¨ç¤ºå°æ•°éƒ¨åˆ†ï¼ˆéšå«å‰å¯¼ 1ï¼Œå®é™…ç²¾åº¦ 53 ä½ï¼‰

å­˜å‚¨æ ¼å¼ï¼š
```
[ç¬¦å·ä½ S][æŒ‡æ•°éƒ¨åˆ† E][å°¾æ•°éƒ¨åˆ† M]
```

#### 2. **æ•´æ•°å¦‚ä½•ç”¨æµ®ç‚¹æ•°è¡¨ç¤º**
åŒç²¾åº¦æµ®ç‚¹æ•°å¯ä»¥ç²¾ç¡®è¡¨ç¤ºçš„æ•´æ•°èŒƒå›´ç”±å°¾æ•°çš„æœ‰æ•ˆä½æ•°å†³å®šï¼š
- **æœ‰æ•ˆä½æ•°**ï¼š53 ä½ï¼ˆ52 ä½æ˜¾å¼å­˜å‚¨ + 1 ä½éšå«çš„ `1.`ï¼‰
- **æœ€å¤§ç²¾ç¡®æ•´æ•°**ï¼šæ‰€æœ‰ 53 ä½éƒ½ä¸º `1` æ—¶ï¼Œè¡¨ç¤ºçš„æ•´æ•°æ˜¯ `2^53 - 1 = 9007199254740991`

#### 3. **ä¸ºä»€ä¹ˆ `2^53 - 1` æ˜¯å®‰å…¨ä¸Šé™ï¼Ÿ**
- **`2^53` çš„è¡¨ç¤ºé—®é¢˜**ï¼š
  - `2^53` çš„äºŒè¿›åˆ¶æ˜¯ `1` åè·Ÿ 53 ä¸ª `0`ï¼Œéœ€è¦ 54 ä½å­˜å‚¨ã€‚
  - ä½†å°¾æ•°åªæœ‰ 53 ä½æœ‰æ•ˆä½ï¼Œå› æ­¤ `2^53` å¯ä»¥ç²¾ç¡®è¡¨ç¤ºï¼ˆå› ä¸ºå®ƒæ˜¯ 2 çš„å¹‚æ¬¡ï¼ŒæŒ‡æ•°éƒ¨åˆ†å¯ä»¥è°ƒæ•´ï¼‰ã€‚
  - ä½† `2^53 + 1` æ— æ³•ç²¾ç¡®è¡¨ç¤ºï¼Œå› ä¸ºéœ€è¦ 54 ä½ï¼Œè€Œæµ®ç‚¹æ•°æ— æ³•åŒºåˆ† `2^53` å’Œ `2^53 + 1`ã€‚

- **éªŒè¯**ï¼š
  ```javascript
  console.log(2 ** 53 === (2 ** 53 + 1)); // è¾“å‡º trueï¼ˆæ— æ³•åŒºåˆ†ï¼‰
  ```

#### 4. **å®‰å…¨æ•´æ•°çš„å®šä¹‰**
- **å®‰å…¨æ•´æ•°**ï¼šå¯ä»¥ç²¾ç¡®è¡¨ç¤ºä¸”èƒ½æ­£ç¡®æ¯”è¾ƒçš„æ•´æ•°ï¼ˆå³ `x === x + 1` ä¸º `false`ï¼‰ã€‚
- **èŒƒå›´**ï¼š`-2^53 + 1` åˆ° `2^53 - 1`ï¼ˆå³ `-9007199254740991` åˆ° `9007199254740991`ï¼‰ã€‚
- `Number.MAX_SAFE_INTEGER` æ˜¯ `2^53 - 1`ï¼Œ`Number.MIN_SAFE_INTEGER` æ˜¯ `-2^53 + 1`ã€‚

#### 5. **è¶…å‡ºå®‰å…¨èŒƒå›´çš„åæœ**
- **ç²¾åº¦ä¸¢å¤±**ï¼šè¶…è¿‡ `2^53` åï¼Œç›¸é‚»æ•´æ•°æ— æ³•åŒºåˆ†ã€‚
  ```javascript
  console.log(9007199254740992 === 9007199254740993); // true
  ```
- **è¿ç®—é”™è¯¯**ï¼š
  ```javascript
  console.log(9007199254740992 + 1); // 9007199254740992ï¼ˆç»“æœä¸æ­£ç¡®ï¼‰
  ```

#### 6. **ä¸ºä»€ä¹ˆä¸æ˜¯ `2^52` æˆ– `2^64`ï¼Ÿ**
- `2^52` å¤ªå°ï¼Œæµªè´¹äº†æµ®ç‚¹æ•°çš„ç²¾åº¦æ½œåŠ›ã€‚
- `2^64` è¶…å‡ºæµ®ç‚¹æ•°çš„æœ‰æ•ˆä½æ•°ï¼ˆåŒç²¾åº¦æµ®ç‚¹æ•°æ— æ³•ç›´æ¥è¡¨ç¤º 64 ä½æ•´æ•°ï¼‰ã€‚

#### 7. **å®é™…åº”ç”¨ä¸­çš„æ³¨æ„äº‹é¡¹**
- **å¤§æ•´æ•°è¿ç®—**ï¼šè‹¥éœ€è¦å¤„ç†æ›´å¤§çš„æ•´æ•°ï¼Œéœ€ä½¿ç”¨ `BigInt`ï¼ˆES2020 å¼•å…¥ï¼‰ï¼š
  ```javascript
  const bigNum = 9007199254740993n; // BigInt å­—é¢é‡
  console.log(bigNum + 1n); // æ­£ç¡®è¾“å‡º 9007199254740994n
  ```
- **JSON çš„é™åˆ¶**ï¼šJSON ä¸æ”¯æŒ `BigInt`ï¼Œå¤§æ•´æ•°éœ€è½¬ä¸ºå­—ç¬¦ä¸²ä¼ è¾“ã€‚

#### æ€»ç»“
`Number.MAX_SAFE_INTEGER = 2^53 - 1` æ˜¯ç”± IEEE 754 åŒç²¾åº¦æµ®ç‚¹æ•°çš„ 53 ä½æœ‰æ•ˆç²¾åº¦å†³å®šçš„ï¼Œè¶…è¿‡æ­¤èŒƒå›´çš„æ•´æ•°å¯èƒ½ä¼šä¸¢å¤±ç²¾åº¦æˆ–å¯¼è‡´è¿ç®—é”™è¯¯ã€‚



# JavaScript AI application



~~~html
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Basic Project</title>
  <link rel="stylesheet" href="css/style.css">
</head>
<body>

  <h1>Hello DeepSeek</h1>
  <!-- æŒ‚è½½ç‚¹ -->
  <div id="reply">   </div>


  <script src="js/main.js"></script>
</body>
</html>
~~~



~~~js
//  é€šè¿‡JS å¼•å…¥ DeepSeek


// å½“LLM API æœåŠ¡
// chat æ–¹å¼ AIGC ç”Ÿæˆ/å®Œæˆ è¿”å›çš„å†…å®¹
// ç”±openai åˆ¶å®šçš„
// è¯·æ±‚è¡Œ
const endpoint = "https://api.deepseek.com/chat/completions";
// è¯·æ±‚å¤´
const headers = {
  // å†…å®¹ç±»å‹
  "Content-Type": "application/json",
  // æˆæƒ  Bearer ä»¤ç‰Œï¼ˆæˆæƒç å‰ç¼€ï¼‰
  Authorization:`Bearer sk-0325f5f498f9445f98c80bc44a8616a7`,
  "deepseek-organization": "deepseek-ai",
}
  // è¯·æ±‚ä½“
  const payload={
    
    model:'deepseek-chat',
    messages:[
      {
        role:'system',
        content:'ä½ æ˜¯ä¸€ä¸ªéå¸¸æœ‰å¸®åŠ©çš„åŠ©æ‰‹'
      },

      {
        role:'user',
        content:'Hello,u little cute LLM'
      },

    ]


  }
  // å‘èµ·è¯·æ±‚
  fetch(endpoint,{
    method:'POST',
    headers,
    body:JSON.stringify(payload)
  })
.then(response=>response.json())
.then(data=>{
  console.log(data)
      // æŒ‚è½½åˆ°htmlä¸­
  document.querySelector('#reply').innerHTML+=data.choices[0].message.content
 
})

~~~

##  ä¸ºä»€ä¹ˆæœ‰.choices[0]? 

å› ä¸ºdataè¿”å›çš„æ˜¯ä¸€ä¸ªå¤æ‚çš„æ•°ç»„ï¼š

æ•°ç»„é‡Œé¢åŒ…å«ç€Objectç»“æ„



![](./../../Typora Md/TyporaPic/å±å¹•æˆªå›¾ 2025-06-05 203016.png)

![](./../../Typora Md/TyporaPic/å±å¹•æˆªå›¾ 2025-06-05 203533.png)

## è¯·æ±‚å¤´ è¯·æ±‚ä½“

![image-20250605211528417](./../../Typora Md/TyporaPic/image-20250605211528417.png)

**## http è¯·æ±‚**

-   è¯·æ±‚è¡Œ  åŒ…å«ï¼šè¯·æ±‚æ–¹æ³•ï¼ˆGETã€POSTï¼‰ã€URLï¼ˆè¯·æ±‚çš„åœ°å€ï¼‰ã€è¯·æ±‚çš„åè®®

-   POST https://api.deepseek.com/chat/completions

-   è¯·æ±‚å¤´  

   è®¾ç½®å„ç§å¤´éƒ¨ä¿¡æ¯

   {

â€‹    Content-Type: application/json, //ä¼ é€çš„å†…å®¹çš„ç±»å‹

â€‹    Authorization:`Bearer api-key`, // è¯·æ±‚å‡­è¯

   }

-   è¯·æ±‚ä½“

   GET æ²¡æœ‰è¯·æ±‚ä½“

   POST å¯ä»¥æœ‰è¯·æ±‚ä½“

ç”±ç½‘ç«™å‘æ¥çš„ä¿¡æ¯æ˜¾ç¤ºï¼ŒAIçš„roleä¸ºassistantï¼Œç”±openaiå®šåˆ¶

![image-20250605211706872](./../../Typora Md/TyporaPic/image-20250605211706872.png)





# **`constructor` å’Œ `prototype` è¯¦è§£**

åœ¨ JavaScript ä¸­ï¼Œ`constructor` å’Œ `prototype` æ˜¯ **é¢å‘å¯¹è±¡ç¼–ç¨‹ï¼ˆOOPï¼‰** çš„æ ¸å¿ƒæ¦‚å¿µï¼Œå®ƒä»¬æ„æˆäº† **åŸå‹é“¾ï¼ˆPrototype Chainï¼‰** çš„åŸºç¡€ã€‚

---

## **1. `prototype`ï¼ˆåŸå‹ï¼‰**
### **(1) ä»€ä¹ˆæ˜¯ `prototype`ï¼Ÿ**
- **æ¯ä¸ªå‡½æ•°ï¼ˆæ„é€ å‡½æ•°ï¼‰éƒ½æœ‰ä¸€ä¸ª `prototype` å±æ€§**ï¼ˆé»˜è®¤æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼‰ã€‚
- **`prototype` ç”¨äºå®šä¹‰ç”±è¯¥æ„é€ å‡½æ•°åˆ›å»ºçš„å®ä¾‹å…±äº«çš„å±æ€§å’Œæ–¹æ³•**ã€‚

### **(2) é»˜è®¤çš„ `prototype`**
```javascript
function Person(name) {
    this.name = name;
}

// é»˜è®¤çš„ `prototype` ç»“æ„ï¼š
console.log(Person.prototype);
// {
//   constructor: Person,  // é»˜è®¤åŒ…å« constructor
//   __proto__: Object.prototype  // ç»§æ‰¿è‡ª Object
// }
```

### **(3) `prototype` çš„ä½œç”¨**
- **`prototype` ä¸Šçš„å±æ€§å’Œæ–¹æ³•å¯ä»¥è¢«æ‰€æœ‰å®ä¾‹å…±äº«**ï¼š
  ```javascript
  Person.prototype.sayHello = function() {
      console.log("Hello, " + this.name);
  };
  
  const alice = new Person("Alice");
  const bob = new Person("Bob");
  
  alice.sayHello(); // "Hello, Alice"
  bob.sayHello();   // "Hello, Bob"
  ```
  - æ‰€æœ‰ `Person` å®ä¾‹éƒ½èƒ½è®¿é—® `sayHello`ï¼Œ**é¿å…é‡å¤å®šä¹‰æ–¹æ³•**ï¼ˆèŠ‚çœå†…å­˜ï¼‰ã€‚

---

## **2. `constructor`ï¼ˆæ„é€ å‡½æ•°ï¼‰**
### **(1) ä»€ä¹ˆæ˜¯ `constructor`ï¼Ÿ**
- **`constructor` æ˜¯ä¸€ä¸ªæŒ‡å‘æ„é€ å‡½æ•°çš„å¼•ç”¨**ï¼Œå®ƒå­˜å‚¨åœ¨ `prototype` å¯¹è±¡ä¸Šã€‚
- **é»˜è®¤æƒ…å†µä¸‹ï¼Œ`prototype.constructor` æŒ‡å‘å‡½æ•°è‡ªèº«**ï¼š
  ```javascript
  console.log(Person.prototype.constructor === Person); // true âœ…
  ```

### **(2) `constructor` çš„ä½œç”¨**
- **ç”¨äºåˆ¤æ–­å¯¹è±¡çš„æ„é€ å‡½æ•°**ï¼š
  ```javascript
  const alice = new Person("Alice");
  console.log(alice.constructor === Person); // true âœ…
  ```
- **å¯ä»¥åŠ¨æ€åˆ›å»ºæ–°å®ä¾‹**ï¼š
  ```javascript
  function createFromConstructor(Constructor, ...args) {
      return new Constructor(...args);
  }
  
  const newPerson = createFromConstructor(Person, "Charlie");
  console.log(newPerson.name); // "Charlie"
  ```

---

## **3. `constructor` å’Œ `prototype` çš„å…³ç³»**
| å±æ€§                   | è¯´æ˜                                   | ç¤ºä¾‹                                      |
| ---------------------- | -------------------------------------- | ----------------------------------------- |
| **`prototype`**        | æ„é€ å‡½æ•°çš„åŸå‹å¯¹è±¡ï¼Œå­˜å‚¨å…±äº«æ–¹æ³•       | `Person.prototype.sayHello = ...`         |
| **`constructor`**      | `prototype` ä¸Šçš„å±æ€§ï¼ŒæŒ‡å‘æ„é€ å‡½æ•°æœ¬èº« | `Person.prototype.constructor === Person` |
| **å®ä¾‹çš„ `__proto__`** | æŒ‡å‘æ„é€ å‡½æ•°çš„ `prototype`             | `alice.__proto__ === Person.prototype`    |

### **å…³ç³»å›¾**
```
å®ä¾‹ï¼ˆaliceï¼‰  â†’  __proto__  â†’  Person.prototype
                                   â†‘
                                   | constructor
                                   Personï¼ˆæ„é€ å‡½æ•°ï¼‰
```

---

## **4. ä¿®æ”¹ `prototype` å¯¹ `constructor` çš„å½±å“**
### **(1) ç›´æ¥æ·»åŠ æ–¹æ³•ï¼ˆä¸å½±å“ `constructor`ï¼‰**
```javascript
Person.prototype.sayHello = function() { ... };
console.log(Person.prototype.constructor === Person); // true âœ…
```
- **åªæ˜¯æ·»åŠ æ–¹æ³•ï¼Œ`constructor` ä»ç„¶æŒ‡å‘ `Person`**ã€‚

### **(2) è¦†ç›– `prototype`ï¼ˆä¼šå¯¼è‡´ `constructor` ä¸¢å¤±ï¼‰**
```javascript
Person.prototype = {
    sayHello: function() { ... }
};
console.log(Person.prototype.constructor === Person); // false âŒ
console.log(Person.prototype.constructor === Object); // true âœ…
```
- **åŸå› **ï¼š`{}` æ˜¯ `Object` åˆ›å»ºçš„ï¼Œ`constructor` é»˜è®¤æŒ‡å‘ `Object`ã€‚

### **(3) ä¿®å¤æ–¹å¼**
```javascript
Person.prototype = {
    constructor: Person, // æ‰‹åŠ¨ä¿®å¤
    sayHello: function() { ... }
};
console.log(Person.prototype.constructor === Person); // true âœ…
```

---

## **5. æœ€ä½³å®è·µ**
### **(1) æ¨è `class` è¯­æ³•ï¼ˆES6+ï¼‰**
```javascript
class Person {
    constructor(name) {
        this.name = name;
    }
    sayHello() {
        console.log("Hello, " + this.name);
    }
}
```
- **è‡ªåŠ¨å¤„ç† `prototype` å’Œ `constructor`**ï¼Œé¿å…æ‰‹åŠ¨ç»´æŠ¤ã€‚

### **(2) é¿å…ç›´æ¥è¦†ç›– `prototype`**
- **å¦‚æœè¦æ‰©å±• `prototype`ï¼Œå°½é‡ç”¨ `Object.assign`**ï¼š
  ```javascript
  Object.assign(Person.prototype, {
      sayHello() { ... },
      sayGoodbye() { ... }
  });
  ```

---

## **6. æ€»ç»“**
| æ¦‚å¿µ                   | æè¿°                                                         |
| ---------------------- | ------------------------------------------------------------ |
| **`prototype`**        | æ„é€ å‡½æ•°çš„åŸå‹å¯¹è±¡ï¼Œå­˜å‚¨å…±äº«æ–¹æ³•                             |
| **`constructor`**      | æŒ‡å‘æ„é€ å‡½æ•°çš„å¼•ç”¨ï¼Œé»˜è®¤åœ¨ `prototype` ä¸Š                    |
| **ä¿®æ”¹ `prototype`**   | ç›´æ¥æ‰©å±•ä¸å½±å“ `constructor`ï¼Œè¦†ç›–ä¼šå¯¼è‡´ `constructor` æŒ‡å‘ `Object` |
| **ä¿®å¤ `constructor`** | æ‰‹åŠ¨è®¾ç½® `constructor: Constructor`                          |
| **æœ€ä½³å®è·µ**           | ä½¿ç”¨ `class` æˆ– `Object.assign` é¿å…é—®é¢˜                     |

**å…³é”®ç‚¹**ï¼š
- **`prototype` ç”¨äºå…±äº«æ–¹æ³•**ï¼Œå‡å°‘å†…å­˜å ç”¨ã€‚
- **`constructor` ç”¨äºè¯†åˆ«å¯¹è±¡æ¥æº**ï¼ŒåŠ¨æ€åˆ›å»ºå®ä¾‹ã€‚
- **ä¸è¦ç›´æ¥è¦†ç›– `prototype`**ï¼Œå¦åˆ™è¦æ‰‹åŠ¨ä¿®å¤ `constructor`ã€‚