<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>单例模式</title>
</head>

<body>



    <script>
        /*
        Storage 本地存储类
        单例模式 getInstance 静态方法
        @func getItem(key) 获取本地存储的值
        @func setItem(key,value) 设置本地存储的值
        */
        // 函数 + prototype  能完成类 原型式的
        // JS的原型式的  灵活、优雅、简单
        // es6中 为了兼容 拥抱更多开发者 走向企业级开发 开发了 class
        // 如何让class 只会实例化一次？
        // 全局变量
        class Storage {
            static instance;
            constructor() {
                console.log(this);

            }
            // 静态方法
            static getInstance() {
                // 返回一个实例
                // 如果实例化过，则返回之前的，如果是第一次，就实例化
                // 静态的属性
                // es6 class 语法糖
                // Storage 对象 添加静态属性 instance
                if (!Storage.instance) {
                    Storage.instance = new Storage();
                }
                return Storage.instance;
            }
            getItem(key) {
                return localStorage.getItem(key);
            }
            setItem(key, value) {
                // 这段代码浏览器可以识别，node不行
                return localStorage.setItem(key, value)
            }
        }
        // 单例性能好
        // new干掉 拿到对象的实例
        // 静态方法 属于类的方法 不用实例化
        // public private 属于实例的方法
        const storage1 = Storage.getInstance();
        const storage2 = Storage.getInstance();
        // 引用
        // es6 class 语法糖 构建类 本质还是原型式的
        // 怎么让它变成true
        console.log(storage1 === storage2);
        storage1.setItem('try to catch me', 'blocking sight')
        console.log(storage1.getItem('try to catch me'));

    </script>
</body>

</html>